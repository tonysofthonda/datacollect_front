<div class="flex w-full justify-content-between mb-5">
  <app-title catalog="Models" [titlePage]="id ? 'Edit' : 'Add'"></app-title>
</div>

<p-card class="w-min">
  <form [formGroup]="modelForm" (ngSubmit)="submit()" class="grid">
    <div class="col-12 lg:col-6 p-field">
      <label for="code">Code</label>
      <input
        id="code" type="text" pInputText
        formControlName="code"class="w-full"
      />
      <small class="p-error" *ngIf="validationService.fieldInvalid('code')">
        {{ validationService.invalidMessage("code") }}</small
      >
    </div>
    <div class="col-12 lg:col-6 p-field"></div>

    <div class="col-12 lg:col-6 p-field">
      <label for="year">Year</label>
      <input
        id="year" type="number" pInputText
        formControlName="year"class="w-full"
      />
      <small class="p-error" *ngIf="validationService.fieldInvalid('year')">
        {{ validationService.invalidMessage("year") }}</small
      >
    </div>
    <div class="col-12 lg:col-6 p-field"></div>

    <div class="col-12 lg:col-6 p-field">
      <label for="name">Name</label>
      <input
        id="name" type="text" pInputText
        formControlName="name"class="w-full"
      />
      <small class="p-error" *ngIf="validationService.fieldInvalid('name')">
        {{ validationService.invalidMessage("name") }}</small
      >
    </div>
    <div class="col-12 lg:col-6 p-field"></div>

    <div class="col-12 lg:col-6 p-field">
      <label for="description">Description</label>
      <textarea
        id="description" pInputTextarea
        formControlName="description" class="w-full"
        rows="3" [autoResize]="true"
      ></textarea>
    </div>

    <div class="col-12 lg:col-6 p-field" *ngIf="isFinantialSelected"></div>
    <div class="col-12 lg:col-6 p-field" *ngIf="isFinantialSelected">
      <label for="accountNumber">Account Number</label>
      <input
        id="accountNumber" type="text" pInputText
        formControlName="accountNumber"class="w-full"
      />
      <small class="p-error" *ngIf="validationService.fieldInvalid('accountNumber')">
        {{ validationService.invalidMessage("accountNumber") }}</small>
    </div>

    <div class="col-12 p-field">
      <app-system-services [modelFormControl]="modelForm"></app-system-services>
    </div>

    <div class="col-12 p-field">
      <small class="p-error" *ngIf="this.modelForm.errors?.['modelExists']!">
        {{ validationService.invalidMessage(this.modelForm) }}</small>
    </div>

    <div class="flex justify-content-between col-12 lg:col-6">
      <button
        pButton type="button"
        label="Cancel" icon="pi pi-times"
        class="p-button-danger" routerLink="/model/list"
      ></button>

      <button
        pButton type="submit"
        label="Save" icon="pi pi-check"
        class="p-button-success" [disabled]="modelForm.invalid || modelForm.pending"
      ></button>
    </div>
  </form>
</p-card>
